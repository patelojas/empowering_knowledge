{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Docker\\\\swe\\\\EmPoweringKnowledge\\\\cs373-web\\\\frontend\\\\empoweringknowledge\\\\src\\\\Map.js\";\nimport React, { Component } from 'react';\nimport * as d3 from \"d3\";\nimport stateInfo from './stateInfo';\n\nclass Map extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      energy1: null,\n      energy2: null,\n      energy3: null,\n      states: null,\n      values: [],\n      items: [],\n      page: 1\n    };\n    this.drawChart = this.drawChart.bind(this);\n  }\n\n  componentDidMount() {\n    var value = window.location.href.split(\"/\");\n    var path = value[4]; // console.log('https://api.empoweringknowledge.me/api/api/states/')\n    // this.setState({isLoading: true});\n    // fetch('https://api.empoweringknowledge.me/api/state/?page='+ this.state.page)\n    // .then(res => res.json())\n    // .then((data) => {\n    //     this.setState({ items: data,isLoading: false});      \n    // })\n    // .catch(console.log)\n  }\n\n  getBillsPerPolitician(politician) {\n    var totalPages = 1;\n    var i;\n    var bills = 0;\n\n    for (i = 0; i < totalPages; i++) {\n      fetch('https://api.empoweringknowledge.me/api/bills?q={\"filters\":[{\"name\":\"sponsor_id\",\"op\":\"eq\",\"val\":\"' + politician + '\"}]}&page=' + i).then(res => res.json()).then(data => {\n        totalPages = data.total_pages;\n        bills += Object.keys(data.objects).length;\n      });\n    }\n\n    return bills;\n  }\n\n  getBillsPerState(state) {\n    var stateData = null;\n    var totalPages = 1;\n    var i;\n\n    for (i = 0; i < totalPages; i++) {\n      fetch('https://api.empoweringknowledge.me/api/state/?page=' + this.state.page + '\"}]}&page=' + i).then(res => res.json()).then(data => {\n        totalPages = data.total_pages;\n        stateData = data.objects;\n      });\n      var person;\n      var count = 0;\n\n      for (person in stateData.congress_members) {\n        count += this.getBillsPerPolitician(person.member_id);\n      }\n    }\n\n    return count;\n  }\n\n  tooltipHtml(n, d) {\n    /* function to create html content string in tooltip div. */\n    return \"<h4>\" + n + \"</h4><table>\" + \"<tr><td>Energy Bills</td><td>\" + d.low + \"</td></tr>\" + \"</table>\";\n  }\n\n  drawChart() {\n    var states = {\n      \"AL\": \"Alabama\",\n      \"AK\": \"Alaska\",\n      \"AZ\": \"Arizona\",\n      \"AR\": \"Arkansas\",\n      \"CA\": \"California\",\n      \"CO\": \"Colorado\",\n      \"CT\": \"Connecticut\",\n      \"DE\": \"Delaware\",\n      \"FL\": \"Florida\",\n      \"GA\": \"Georgia\",\n      \"HI\": \"Hawaii\",\n      \"ID\": \"Idaho\",\n      \"IL\": \"Illinois\",\n      \"IN\": \"Indiana\",\n      \"IA\": \"Iowa\",\n      \"KS\": \"Kansas\",\n      \"KY\": \"Kentucky\",\n      \"LA\": \"Louisiana\",\n      \"ME\": \"Maine\",\n      \"MD\": \"Maryland\",\n      \"MA\": \"Massachusetts\",\n      \"MI\": \"Michigan\",\n      \"MN\": \"Minnesota\",\n      \"MS\": \"Mississippi\",\n      \"MO\": \"Missouri\",\n      \"MT\": \"Montana\",\n      \"NE\": \"Nebraska\",\n      \"NV\": \"Nevada\",\n      \"NH\": \"New Hampshire\",\n      \"NJ\": \"New Jersey\",\n      \"NM\": \"New Mexico\",\n      \"NY\": \"New York\",\n      \"NC\": \"North Carolina\",\n      \"ND\": \"North Dakota\",\n      \"OH\": \"Ohio\",\n      \"OK\": \"Oklahoma\",\n      \"OR\": \"Oregon\",\n      \"PA\": \"Pennsylvania\",\n      \"RI\": \"Rhode Island\",\n      \"SC\": \"South Carolina\",\n      \"SD\": \"South Dakota\",\n      \"TN\": \"Tennessee\",\n      \"TX\": \"Texas\",\n      \"UT\": \"Utah\",\n      \"VT\": \"Vermont\",\n      \"VA\": \"Virginia\",\n      \"WA\": \"Washington\",\n      \"WV\": \"West Virginia\",\n      \"WI\": \"Wisconsin\",\n      \"WY\": \"Wyoming\"\n    };\n    var sampleData = {};\n    [\"HI\", \"AK\", \"FL\", \"SC\", \"GA\", \"AL\", \"NC\", \"TN\", \"RI\", \"CT\", \"MA\", \"ME\", \"NH\", \"VT\", \"NY\", \"NJ\", \"PA\", \"DE\", \"MD\", \"WV\", \"KY\", \"OH\", \"MI\", \"WY\", \"MT\", \"ID\", \"WA\", \"DC\", \"TX\", \"CA\", \"AZ\", \"NV\", \"UT\", \"CO\", \"NM\", \"OR\", \"ND\", \"SD\", \"NE\", \"IA\", \"MS\", \"IN\", \"IL\", \"MN\", \"WI\", \"MO\", \"AR\", \"OK\", \"KS\", \"LA\", \"VA\"].forEach(function (d) {\n      var num = 0;\n      num = this.getBillsPerState(states[d]);\n      console.log(num);\n      sampleData[d] = {\n        // parks: p, orgs: o, events: e,\n        color: d3.interpolate(\"#ffffcc\", \"#307318\")(num / 5),\n        count: num\n      };\n    });\n    /* draw states on id #statesvg */\n\n    stateInfo.draw(\"#statesvg\", sampleData, this.tooltipHtml);\n    d3.select(window.frameElement).style(\"height\", \"600px\");\n  }\n\n  render() {\n    if (this.state.states != null) {\n      this.drawChart();\n    }\n\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"tooltip\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }), React.createElement(\"svg\", {\n      width: \"960\",\n      height: \"600\",\n      id: \"statesvg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Map;","map":{"version":3,"sources":["C:\\Users\\Docker\\swe\\EmPoweringKnowledge\\cs373-web\\frontend\\empoweringknowledge\\src\\Map.js"],"names":["React","Component","d3","stateInfo","Map","constructor","props","state","energy1","energy2","energy3","states","values","items","page","drawChart","bind","componentDidMount","value","window","location","href","split","path","getBillsPerPolitician","politician","totalPages","i","bills","fetch","then","res","json","data","total_pages","Object","keys","objects","length","getBillsPerState","stateData","person","count","congress_members","member_id","tooltipHtml","n","d","low","sampleData","forEach","num","console","log","color","interpolate","draw","select","frameElement","style","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport * as d3 from \"d3\";\r\nimport stateInfo from './stateInfo';\r\n\r\nclass Map extends Component {\r\n    state = {\r\n            energy1: null,\r\n            energy2: null,\r\n            energy3: null,\r\n            states: null,\r\n            values: [],\r\n            items:[],\r\n            page: 1,\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.drawChart = this.drawChart.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        var value = window.location.href.split(\"/\")\r\n        var path = (value[4])\r\n        // console.log('https://api.empoweringknowledge.me/api/api/states/')\r\n        // this.setState({isLoading: true});\r\n        // fetch('https://api.empoweringknowledge.me/api/state/?page='+ this.state.page)\r\n        // .then(res => res.json())\r\n        // .then((data) => {\r\n        //     this.setState({ items: data,isLoading: false});      \r\n        // })\r\n        // .catch(console.log)\r\n    }\r\n\r\n    getBillsPerPolitician(politician){\r\n        var totalPages = 1;\r\n        var i;\r\n        var bills = 0;\r\n        for(i = 0; i < totalPages; i++){\r\n            fetch('https://api.empoweringknowledge.me/api/bills?q={\"filters\":[{\"name\":\"sponsor_id\",\"op\":\"eq\",\"val\":\"'+ politician + '\"}]}&page='+ i)\r\n            .then(res => res.json())\r\n            .then((data) => {\r\n                totalPages = data.total_pages;\r\n                bills += Object.keys(data.objects).length;     \r\n            })\r\n        }\r\n\r\n        return bills;\r\n    }\r\n\r\n    getBillsPerState(state){\r\n        var stateData = null;\r\n        var totalPages = 1;\r\n        var i;\r\n        for(i = 0; i < totalPages; i++){\r\n            fetch('https://api.empoweringknowledge.me/api/state/?page='+ this.state.page + '\"}]}&page='+ i)\r\n            .then(res => res.json())\r\n            .then((data) => {\r\n                totalPages = data.total_pages;\r\n                stateData = data.objects;  \r\n            })\r\n\r\n            var person;\r\n            var count = 0;\r\n            for(person in stateData.congress_members){\r\n                count += this.getBillsPerPolitician(person.member_id);\r\n            }\r\n        }\r\n        return count;\r\n    }\r\n    tooltipHtml(n, d){\t/* function to create html content string in tooltip div. */\r\n\t\treturn \"<h4>\"+n+\"</h4><table>\"+\r\n\t\t\t\"<tr><td>Energy Bills</td><td>\"+(d.low)+\"</td></tr>\"+\r\n\t\t\t\"</table>\";\r\n\t}\r\n\r\n    drawChart() {\r\n        var states = {\"AL\": \"Alabama\",\r\n                \"AK\": \"Alaska\",\r\n                \"AZ\": \"Arizona\",\r\n                \"AR\": \"Arkansas\",\r\n                \"CA\": \"California\",\r\n                \"CO\": \"Colorado\",\r\n                \"CT\": \"Connecticut\",\r\n                \"DE\": \"Delaware\",\r\n                \"FL\": \"Florida\",\r\n                \"GA\": \"Georgia\",\r\n                \"HI\": \"Hawaii\",\r\n                \"ID\": \"Idaho\",\r\n                \"IL\": \"Illinois\",\r\n                \"IN\": \"Indiana\",\r\n                \"IA\": \"Iowa\",\r\n                \"KS\": \"Kansas\",\r\n                \"KY\": \"Kentucky\",\r\n                \"LA\": \"Louisiana\",\r\n                \"ME\": \"Maine\",\r\n                \"MD\": \"Maryland\",\r\n                \"MA\": \"Massachusetts\",\r\n                \"MI\": \"Michigan\",\r\n                \"MN\": \"Minnesota\",\r\n                \"MS\": \"Mississippi\",\r\n                \"MO\": \"Missouri\",\r\n                \"MT\": \"Montana\",\r\n                \"NE\": \"Nebraska\",\r\n                \"NV\": \"Nevada\",\r\n                \"NH\": \"New Hampshire\",\r\n                \"NJ\": \"New Jersey\",\r\n                \"NM\": \"New Mexico\",\r\n                \"NY\": \"New York\",\r\n                \"NC\": \"North Carolina\",\r\n                \"ND\": \"North Dakota\",\r\n                \"OH\": \"Ohio\",\r\n                \"OK\": \"Oklahoma\",\r\n                \"OR\": \"Oregon\",\r\n                \"PA\": \"Pennsylvania\",\r\n                \"RI\": \"Rhode Island\",\r\n                \"SC\": \"South Carolina\",\r\n                \"SD\": \"South Dakota\",\r\n                \"TN\": \"Tennessee\",\r\n                \"TX\": \"Texas\",\r\n                \"UT\": \"Utah\",\r\n                \"VT\": \"Vermont\",\r\n                \"VA\": \"Virginia\",\r\n                \"WA\": \"Washington\",\r\n                \"WV\": \"West Virginia\",\r\n                \"WI\": \"Wisconsin\",\r\n                \"WY\": \"Wyoming\"};\r\n        \r\n\r\n        var sampleData = {};\r\n        [\"HI\", \"AK\", \"FL\", \"SC\", \"GA\", \"AL\", \"NC\", \"TN\", \"RI\", \"CT\", \"MA\",\r\n            \"ME\", \"NH\", \"VT\", \"NY\", \"NJ\", \"PA\", \"DE\", \"MD\", \"WV\", \"KY\", \"OH\",\r\n            \"MI\", \"WY\", \"MT\", \"ID\", \"WA\", \"DC\", \"TX\", \"CA\", \"AZ\", \"NV\", \"UT\",\r\n            \"CO\", \"NM\", \"OR\", \"ND\", \"SD\", \"NE\", \"IA\", \"MS\", \"IN\", \"IL\", \"MN\",\r\n            \"WI\", \"MO\", \"AR\", \"OK\", \"KS\", \"LA\", \"VA\"]\r\n            .forEach(function (d) {\r\n                var num = 0\r\n                num = this.getBillsPerState(states[d]);\r\n                console.log(num);\r\n                sampleData[d] = {\r\n                    // parks: p, orgs: o, events: e,\r\n                    color: d3.interpolate(\"#ffffcc\", \"#307318\")(num/5),\r\n                    count: num,\r\n                };\r\n            });\r\n\r\n        /* draw states on id #statesvg */\r\n        stateInfo.draw(\"#statesvg\", sampleData, this.tooltipHtml);\r\n\r\n        d3.select(window.frameElement).style(\"height\", \"600px\");\r\n    }\r\n\r\n    render() {\r\n        if (this.state.states != null) {\r\n            this.drawChart();\r\n        }\r\n        return (\r\n            <div className=\"container\">\r\n                <div id=\"tooltip\"></div>\r\n                <svg width=\"960\" height=\"600\" id=\"statesvg\"></svg>\r\n            </div>\r\n        );\r\n\r\n    }\r\n}\r\n\r\nexport default Map;\r\n"]},"metadata":{},"sourceType":"module"}