{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Docker\\\\swe\\\\EmPoweringKnowledge\\\\cs373-web\\\\frontend\\\\empoweringknowledge\\\\src\\\\PieChart.js\";\nimport React, { Component } from 'react';\nimport * as d3 from \"d3\";\n\nclass PieChart extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      democrat: 0,\n      republican: 0,\n      other: 0\n    };\n  }\n\n  componentDidMount() {\n    var value = window.location.href.split(\"/\");\n    var path = value[4];\n    var page = 1;\n\n    for (var i = 1; i < 173; i++) {\n      fetch('https://api.empoweringknowledge.me/api/congressmembers?page=' + page).then(res => res.json()).then(data => {\n        for (var d of data.objects) {\n          if (d.party == \"D\") {\n            this.setState({\n              democrat: this.state.democrat += Object.keys(d.bills_sponsored).length\n            });\n          } else if (d.party == \"R\") {\n            this.setState({\n              republican: this.state.republican += Object.keys(d.bills_sponsored).length\n            });\n          } else {\n            this.setState({\n              other: this.state.other += Object.keys(d.bills_sponsored).length\n            });\n          }\n        }\n      }, this.finish());\n    }\n  }\n\n  finish() {\n    console.log(\"done\");\n    return;\n  }\n\n  render() {\n    // Create dummy data\n    var data = {\n      Republican: this.state.republican,\n      Other: this.state.other,\n      Democrat: this.state.democrat\n    };\n    console.log(data); // set the dimensions and margins of the graph\n\n    var width = 450;\n    var height = 450;\n    var margin = 40; // The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.\n    // append the svg object to the div called 'my_dataviz'\n\n    var svg = d3.select(\"#my_dataviz\").append(\"svg\").attr(\"width\", width).attr(\"height\", height).append(\"g\").attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\"); // set the color scale\n\n    var color = d3.scaleOrdinal().domain(data).range([\"#ff0000\", \"#808080\", \"#0000ff\"]); // shape helper to build arcs:\n\n    var arcGenerator = d3.arc().innerRadius(0).outerRadius(radius); // Compute the position of each group on the pie:\n\n    var pie = d3.pie().value(function (d) {\n      return d.value;\n    });\n    var data_ready = pie(d3.entries(data)); // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.\n\n    svg.selectAll('whatever').data(data_ready).enter().append('path').attr('d', d3.arc().innerRadius(0).outerRadius(radius)).attr('fill', function (d) {\n      return color(d.data.key);\n    }).attr(\"stroke\", \"black\").style(\"stroke-width\", \"2px\").style(\"opacity\", 0.7);\n    svg.selectAll('whatever').data(data_ready).enter().append('text').text(function (d) {\n      return d.data.key;\n    }).attr(\"transform\", function (d) {\n      return \"translate(\" + arcGenerator.centroid(d) + \")\";\n    }).style(\"text-anchor\", \"middle\").style(\"font-size\", 30);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      style: {\n        paddingTop: \"2%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"Total Number of Energy Bills by Party\"), React.createElement(\"div\", {\n      style: {\n        paddingLeft: \"35%\",\n        justifyContent: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"svg\", {\n      id: \"my_dataviz\",\n      width: \"100%\",\n      height: 650,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default PieChart;","map":{"version":3,"sources":["C:\\Users\\Docker\\swe\\EmPoweringKnowledge\\cs373-web\\frontend\\empoweringknowledge\\src\\PieChart.js"],"names":["React","Component","d3","PieChart","constructor","props","state","democrat","republican","other","componentDidMount","value","window","location","href","split","path","page","i","fetch","then","res","json","data","d","objects","party","setState","Object","keys","bills_sponsored","length","finish","console","log","render","Republican","Other","Democrat","width","height","margin","svg","select","append","attr","color","scaleOrdinal","domain","range","arcGenerator","arc","innerRadius","outerRadius","radius","pie","data_ready","entries","selectAll","enter","key","style","text","centroid","paddingTop","paddingLeft","justifyContent"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport * as d3 from \"d3\";\r\n\r\nclass PieChart extends Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n        democrat: 0,\r\n        republican: 0,\r\n        other: 0\r\n        }\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        var value = window.location.href.split(\"/\")\r\n        var path = (value[4])\r\n        var page = 1;\r\n        for(var i = 1; i < 173; i++){\r\n            fetch('https://api.empoweringknowledge.me/api/congressmembers?page=' + page)\r\n            .then(res => res.json())\r\n            .then((data) => {\r\n                for(var d of data.objects){\r\n                    if(d.party == \"D\"){\r\n                        this.setState({ democrat: this.state.democrat += Object.keys(d.bills_sponsored).length}); \r\n                       \r\n                    }\r\n                    else if(d.party == \"R\"){\r\n                        this.setState({ republican: this.state.republican += Object.keys(d.bills_sponsored).length}); \r\n                    }\r\n                    else {\r\n                        this.setState({ other: this.state.other += Object.keys(d.bills_sponsored).length}); \r\n                    }\r\n                   \r\n                }\r\n            }, this.finish())\r\n            \r\n        }\r\n        \r\n        \r\n    }\r\n\r\n    finish(){    \r\n        console.log(\"done\")\r\n        return\r\n    }\r\n\r\n  \r\n\r\n    render() {\r\n        \r\n        // Create dummy data\r\n        var data = {Republican: this.state.republican,  Other: this.state.other, Democrat: this.state.democrat,}\r\n\r\n        console.log(data)\r\n        // set the dimensions and margins of the graph\r\n        var width = 450\r\n        var height = 450\r\n        var margin = 40\r\n\r\n        // The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.\r\n\r\n        // append the svg object to the div called 'my_dataviz'\r\n        var svg = d3.select(\"#my_dataviz\")\r\n        .append(\"svg\")\r\n        .attr(\"width\", width)\r\n        .attr(\"height\", height)\r\n        .append(\"g\")\r\n        .attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\");\r\n\r\n\r\n        // set the color scale\r\n        var color = d3.scaleOrdinal()\r\n        .domain(data)\r\n        .range([\"#ff0000\", \"#808080\",\"#0000ff\" ])\r\n\r\n         // shape helper to build arcs:\r\n        var arcGenerator = d3.arc()\r\n        .innerRadius(0)\r\n        .outerRadius(radius)\r\n\r\n\r\n\r\n        // Compute the position of each group on the pie:\r\n        var pie = d3.pie()\r\n        .value(function(d) {return d.value; })\r\n        var data_ready = pie(d3.entries(data))\r\n\r\n        // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.\r\n        svg\r\n        .selectAll('whatever')\r\n        .data(data_ready)\r\n        .enter()\r\n        .append('path')\r\n        .attr('d', d3.arc()\r\n        .innerRadius(0)\r\n        .outerRadius(radius)\r\n        )\r\n        .attr('fill', function(d){ return(color(d.data.key)) })\r\n        .attr(\"stroke\", \"black\")\r\n        .style(\"stroke-width\", \"2px\")\r\n        .style(\"opacity\", 0.7)\r\n\r\n            svg\r\n        .selectAll('whatever')\r\n        .data(data_ready)\r\n        .enter()\r\n        .append('text')\r\n        .text(function (d) { return d.data.key })\r\n        .attr(\"transform\", function (d) { return \"translate(\" + arcGenerator.centroid(d) + \")\"; })\r\n        .style(\"text-anchor\", \"middle\")\r\n        .style(\"font-size\", 30)\r\n    \r\n\r\n\r\n\r\n        return (\r\n            <div>\r\n                <h2 style={{paddingTop: \"2%\"}}>Total Number of Energy Bills by Party</h2>\r\n                <div style={{ paddingLeft: \"35%\", justifyContent: \"center\" }}>\r\n                    <svg id='my_dataviz' width=\"100%\" height={650}></svg>\r\n                </div>\r\n            </div>\r\n\r\n        );\r\n\r\n    }\r\n}\r\n\r\nexport default PieChart;\r\n"]},"metadata":{},"sourceType":"module"}